cmake_minimum_required(VERSION 3.20 FATAL_ERROR)

project(Lithography)

# ViennaLS installation path (adjust as needed)
set(VIENNALS_PATH "../../../install")
set(VIENNALS_VERSION "4.2.2")
set(VIENNACORE_VERSION "1.1.0")
set(VIENNAHRLE_VERSION "0.5.0")

find_package(OpenMP REQUIRED)
find_package(ViennaHRLE REQUIRED PATHS ${VIENNALS_PATH})
find_package(ViennaCore REQUIRED PATHS ${VIENNALS_PATH})
find_package(ViennaLS   REQUIRED PATHS ${VIENNALS_PATH})
find_package(VTK        REQUIRED PATHS ${VIENNALS_PATH})

# Executable
add_executable(${PROJECT_NAME} "Lithography.cpp")

if(OpenMP_FOUND)
  target_compile_options(${PROJECT_NAME} PRIVATE ${OpenMP_CXX_FLAGS})
  target_link_libraries(${PROJECT_NAME} PRIVATE OpenMP::OpenMP_CXX)
else()
  message(FATAL_ERROR "OpenMP not found!")
endif()

# Compile flags
target_compile_features(${PROJECT_NAME} PRIVATE cxx_std_17)
target_compile_options(${PROJECT_NAME} PRIVATE ${OpenMP_CXX_FLAGS})

# target_link_libraries(${PROJECT_NAME}
#   PRIVATE
#     OpenMP::OpenMP_CXX
#     ViennaCore
#     ViennaHRLE
#     ViennaLS
# )

# Include directories (if needed)
target_include_directories(${PROJECT_NAME}
  PRIVATE
    ${VIENNALS_PATH}/include/viennals-${VIENNALS_VERSION}
    ${VIENNALS_PATH}/include/viennacore-${VIENNACORE_VERSION}
    ${VIENNALS_PATH}/include/viennahrle-${VIENNAHRLE_VERSION}
)
